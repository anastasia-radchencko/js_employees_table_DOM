{"version":3,"sources":["scripts/main.js"],"names":["th","document","querySelector","tbody","notifTimeout","lengthOfName","ageIsLess","ageIsMore","employeeForm","createElement","classList","add","innerHTML","body","append","cIndex","sortingTable","index","nameColumn","directSorting","sortTable","children","sort","first","second","a","b","localeCompare","toNormalNumber","reverse","string","res","Number","includes","slice","split","join","addEventListener","e","target","cellIndex","forEach","row","remove","parentElement","isValid","startNotification","title","description","type","possTop","possRight","blockNotif","headerNotif","textNotif","setAttribute","style","fontSize","top","right","setTimeout","onFocusInvalidForm","field","firstElementChild","outlineColor","focus","validateForm","data","get","length","test","FormData","numberToSalary","toLocaleString","preventDefault","newRow","insertRow","insertCell","innerText","reset","validCell","indexCompare","isThereInput","changeOnInput","prev","cellWidth","getComputedStyle","width","value","parseFloat","editCells","el","newText","validateCells","input","getValidCells","border","saveChangesOnTable","targetCell","closest","push","prevText","ev","key","blur"],"mappings":"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","file":"main.48978e39.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst th = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\n\nconst notifTimeout = 3000;\n\nconst lengthOfName = 4;\nconst ageIsLess = 18;\nconst ageIsMore = 90;\n\n// form creation\n\nconst employeeForm = document.createElement('form');\n\nemployeeForm.classList.add('new-employee-form');\n\nemployeeForm.innerHTML = `\n    <label>Name:\n      <input type=\"text\" name=\"name\" data-qa=\"name\">\n    </label>\n    <label>Position:\n      <input type=\"text\" name=\"position\" data-qa=\"position\">\n    </label>\n    <label>Office:\n      <select name=\"office\" data-qa=\"office\">\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n    <label>Age:\n      <input type=\"number\" name=\"age\" data-qa=\"age\">\n    </label>\n    <label>Salary:\n      <input type=\"number\" name=\"salary\" data-qa=\"salary\">\n    </label>\n    <button type=\"submit\">Save to table</button>\n`;\n\ndocument.body.append(employeeForm);\n\n// table sorting\n\nlet cIndex = -1;\n\nth.addEventListener('click', (e) => {\n  const target = e.target;\n  const index = target.cellIndex;\n\n  sortingTable(index, target.innerHTML, cIndex === index);\n\n  cIndex = (cIndex === index) ? -1 : index;\n});\n\nfunction sortingTable(index, nameColumn, directSorting) {\n  const sortTable = [...tbody.children];\n\n  sortTable.sort((first, second) => {\n    const a = first.children[index].innerHTML;\n    const b = second.children[index].innerHTML;\n\n    switch (nameColumn) {\n      case 'Name':\n      case 'Position':\n      case 'Office':\n        return a.localeCompare(b);\n\n      case 'Age':\n      case 'Salary':\n        return toNormalNumber(a) - toNormalNumber(b);\n    }\n  });\n\n  if (directSorting) {\n    sortTable.reverse();\n  }\n\n  tbody.append(...sortTable);\n};\n\nfunction toNormalNumber(string) {\n  let res = '';\n\n  string.includes('$')\n    ? res = string.slice(1).split(',').join('')\n    : res = string;\n\n  return Number(res);\n};\n\n// active row\n\ntbody.addEventListener('click', (e) => {\n  [...tbody.children].forEach(row => {\n    row.classList.remove('active');\n  });\n\n  e.target.parentElement.classList.add('active');\n});\n\n// validation and notification form\n\nlet isValid = false;\n\nconst startNotification = (title, description, type,\n  possTop = 450, possRight = 275) => {\n  const body = document.querySelector('body');\n  const blockNotif = document.createElement('div');\n  const headerNotif = document.createElement('h2');\n  const textNotif = document.createElement('p');\n\n  textNotif.innerHTML = description;\n  headerNotif.innerHTML = title;\n  blockNotif.classList.add('notification', type);\n  blockNotif.setAttribute('data-qa', 'notification');\n  headerNotif.classList.add('header');\n\n  blockNotif.append(headerNotif, textNotif);\n  body.append(blockNotif);\n\n  headerNotif.style.fontSize = '18px';\n  blockNotif.style.top = `${possTop}px`;\n  blockNotif.style.right = `${possRight}px`;\n\n  setTimeout(() => blockNotif.remove(), notifTimeout);\n};\n\nconst onFocusInvalidForm = (field) => {\n  employeeForm.children[field].firstElementChild\n    .addEventListener('focus', (e) => {\n      e.target.style.outlineColor = '#F00';\n    });\n\n  employeeForm.children[field].focus();\n};\n\nconst validateForm = (data) => {\n  if (data.get('name').length < lengthOfName\n    || /\\d/.test(data.get('name'))) {\n    onFocusInvalidForm(0);\n\n    startNotification(\n      'Name is not correct',\n      'Your name must have at least 4 letters and must not include numbers',\n      'error',\n    );\n\n    isValid = false;\n  } else if (data.get('office') === null) {\n    onFocusInvalidForm(2);\n\n    startNotification(\n      'Office is not correct',\n      'Please, select an option',\n      'error',\n    );\n\n    isValid = false;\n  } else if (data.get('position') === '') {\n    onFocusInvalidForm(1);\n\n    startNotification(\n      'Position is not correct',\n      'Position must not be empty',\n      'error',\n    );\n\n    isValid = false;\n  } else if (data.get('age') < ageIsLess || data.get('age') > ageIsMore) {\n    onFocusInvalidForm(3);\n\n    startNotification(\n      'Age is not correct',\n      `Your age cannot be less than ${ageIsLess} and more than ${ageIsMore}`,\n      'error',\n    );\n\n    isValid = false;\n  } else if (data.get('salary') === '' || data.get('salary') <= 0) {\n    onFocusInvalidForm(4);\n\n    startNotification(\n      'Salary is not correct',\n      'Salary must be greater than 0',\n      'error',\n    );\n\n    isValid = false;\n  } else {\n    isValid = true;\n  }\n};\n\n// submit button\n\nemployeeForm.addEventListener('submit', (e) => {\n  const data = new FormData(employeeForm);\n  const numberToSalary = `$${Number(data.get('salary'))\n    .toLocaleString('en-US')}`;\n\n  e.preventDefault();\n  validateForm(data);\n\n  if (!isValid) {\n    return;\n  }\n\n  const newRow = tbody.insertRow();\n\n  newRow.insertCell(0).innerText = data.get('name');\n  newRow.insertCell(1).innerText = data.get('position');\n  newRow.insertCell(2).innerText = data.get('office');\n  newRow.insertCell(3).innerText = data.get('age');\n  newRow.insertCell(4).innerText = numberToSalary;\n\n  employeeForm.reset();\n\n  startNotification(\n    'Validation success',\n    'Employee was successfully added',\n    'success',\n  );\n});\n\n// double click and editing\n\nconst indexCompare = [];\nlet validCell;\nlet isThereInput = false;\n\nconst changeOnInput = (e, prev) => {\n  let cellWidth = getComputedStyle(e.target).width;\n\n  switch (e.target.cellIndex) {\n    case 0:\n    case 1:\n      e.target.innerHTML = `\n        <input type=\"text\" class=\"cell-input\" placeholder=\"${prev}\">\n      `;\n      break;\n\n    case 2:\n      e.target.innerHTML = `\n        <select class=\"cell-input\">\n          <option value=\"Tokyo\">Tokyo</option>\n          <option value=\"Singapore\">Singapore</option>\n          <option value=\"London\">London</option>\n          <option value=\"New York\">New York</option>\n          <option value=\"Edinburgh\">Edinburgh</option>\n          <option value=\"San Francisco\">San Francisco</option>\n        </select>\n      `;\n      document.querySelector('select.cell-input').value = prev;\n      break;\n\n    case 3:\n    case 4:\n      if (!isThereInput) {\n        e.target.innerHTML = `\n          <input type=\"number\" class=\"cell-input\" placeholder=\"${prev}\">\n        `;\n        cellWidth = `${parseFloat(cellWidth) + 30}px`;\n        isThereInput = true;\n      }\n      break;\n  }\n\n  document.querySelector('.cell-input').style.width = cellWidth;\n  e.target.firstElementChild.focus();\n};\n\nconst editCells = (el, prev) => {\n  const newText = el.target.firstElementChild.value;\n\n  if (newText === '' || newText === '0') {\n    el.target.innerHTML = prev;\n  } else {\n    el.target.cellIndex !== 4\n      ? el.target.innerHTML = newText\n      : el.target.innerHTML = `\n        $${Number(newText).toLocaleString('en-US')}\n    `;\n\n    if (el.target.cellIndex !== 2) {\n      startNotification(\n        'Validation success',\n        'Employee was successfully added',\n        'success',\n      );\n    }\n  }\n};\n\nconst validateCells = (e) => {\n  const input = document.querySelector('.cell-input');\n\n  const getValidCells = () => {\n    e.target.firstElementChild.focus();\n    e.target.style.border = `2px solid #F00`;\n    validCell = true;\n  };\n\n  validCell = false;\n\n  if (!input.value.length) {\n    return validCell;\n  }\n\n  if (e.target.cellIndex === 0) {\n    if (input.value.length < 4 || /\\d/.test(input.value)) {\n      getValidCells();\n\n      return startNotification(\n        'Name is not correct',\n        'Your name must have at least 4 letters and must not include numbers',\n        'error',\n      );\n    }\n  } else if (e.target.cellIndex === 3) {\n    if (input.value < ageIsLess || input.value > ageIsMore) {\n      getValidCells();\n\n      return startNotification(\n        'Age is not correct',\n        `Your age cannot be less than ${ageIsLess} and more than ${ageIsMore}`,\n        'error',\n      );\n    }\n  } else if (e.target.cellIndex === 4) {\n    if (input.value < 0) {\n      getValidCells();\n\n      return startNotification(\n        'Salary is not correct',\n        'Salary must be greater than 0',\n        'error',\n      );\n    }\n  } else {\n    return validCell;\n  }\n};\n\nconst saveChangesOnTable = (e, prev) => {\n  validateCells(e);\n\n  if (!validCell) {\n    e.target.style.border = 'none';\n    indexCompare.length = 0;\n    isThereInput = false;\n\n    return editCells(e, prev);\n  }\n};\n\ntbody.addEventListener('dblclick', (e) => {\n  const targetCell = e.target.closest('td');\n\n  if (!targetCell) {\n    return;\n  }\n\n  const cellIndex = targetCell.cellIndex;\n\n  indexCompare.push(cellIndex);\n\n  if (indexCompare[0] !== cellIndex) {\n    return startNotification(\n      'Unfinished changes',\n      'You cannot change another cell until this one is not finished',\n      'error',\n      580,\n    );\n  }\n\n  const prevText = e.target.innerText;\n\n  changeOnInput(e, prevText);\n\n  const field = e.target.firstElementChild;\n\n  field.addEventListener('blur', () => {\n    saveChangesOnTable(e, prevText);\n  });\n\n  field.addEventListener('keyup', (ev) => {\n    if (ev.key === 'Enter') {\n      field.blur();\n    }\n  });\n});\n"]}